#!/usr/bin/env node

const fs = require("fs");
const path = require("path");

const content_file = `<h1 align=center> Title </h1>
<h3 align=center> Description </h3>

<br>
<br>

<h2> â­ Objectives of this repository / project: </h2>
<p></p>

<br>

<h2> ğŸ”¬ Technologies / Tools / Programming languages â€‹â€‹used: </h2>
<!--- Ex: HTML, CSS, JS, Node.Js, Yarn, NPM, PHP, Insomnia, Postman, Vs code... ---> 
<ul>
    <li></li>
    <li></li>
    <li></li>
</ul>

<br>

<h2> ğŸ’» Prerequisites: </h2>
<!--- Ex: install node, npm, yarn... ---> 
<ul>
    <li></li>
    <li></li>
    <li></li>
</ul>

<br>

<h2> ğŸš€ Installing / using the project: </h2>
<p></p>

<br>

<h2> ğŸ‘¨â€ğŸ’» Developed by: </h2>
<strong> <p>Your Name / User Name Github</p> </strong>
<img src="https://avatars.githubusercontent.com/user_name" width="100px" height="100px">

<a href="https://github.com/user_name"> 
    <img src="https://img.shields.io/badge/GitHub-100000?style=for-the-badge&logo=github&logoColor=white" width="100px">
</a> 

<br>

<a href="https://www.linkedin.com/in/user_name/">
    <img src="https://img.shields.io/badge/LinkedIn-0077B5?style=for-the-badge&logo=linkedin&logoColor=white"width="100px">
</a>

`;

const all_params = process.argv;
//console.log(all_params)

const param_accept = all_params.slice(2);
// console.log(param_accept);

const my_path = process.cwd();
//console.log(my_path);

const files_in_dir = fs.readdirSync(my_path);
//console.log(files_in_dir);

if (param_accept == "-y") {
  create_file(content_file);
} else {
  verify_content(files_in_dir);
}

function verify_content(files_in_dir) {
  const readme_exists = files_in_dir.includes("README.md");
  exists_readme(readme_exists);
}

function exists_readme(readme_exists) {
  if (readme_exists == true) {
    console.log(`There is already a README.md file in your directory, ${my_path}`);
    console.log("If you want to replace this existing README.md with another one there are some alternatives, delete it, rename it or use -y parameter in CLI command execution. Ex: readme-cli-create -y");
    return;
  } else {
    create_file(content_file);
  }
}

function create_file(content_file) {
  fs.writeFile("README.md", content_file, (err) => {
    if (err) throw err;
    console.log("The file has been created!");
  });
}
